<!doctype html>
<html>
  <body>
    <h1>Ok</h1>
    <p>You are logged-in, this window will close in 5 seconds.</p>
    <script>
      const params = Array.from(
        location.search.matchAll(/[^&\?]+/g),
        p => p[0].match(/^([^=]*)=(.*)$/).slice(1).map(x => decodeURIComponent(x)))
      window.opener.postMessage({
        'oauth-response': params
      }, origin);
      setTimeout(() => {
        window.close()
      }, 5000)
    </script>
  </body>
</html>
